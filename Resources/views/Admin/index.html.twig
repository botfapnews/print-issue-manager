{% extends 'NewscoopNewscoopBundle::admin_layout.html.twig' %}

{% block admin_title %} {{ parent() }} - {{ 'plugin.printissuemanager.label.title'|trans }}{% endblock %}
{% block admin_page_title_content %}{{ 'plugin.printissuemanager.label.title'|trans }} - {{ 'plugin.printissuemanager.label.config'|trans }}{% endblock %}
{% block admin_stylesheets %}
<link rel="stylesheet" href="{{ asset('/bundles/newscoopnewscoop/css/bootstrap.css') }}">
<link rel="stylesheet" type="text/css" href="{{ asset('/bundles/newscoopnewscoop/css/DT_bootstrap.css') }}">
<link rel="stylesheet" type="text/css" href="{{ asset('/bundles/newscoopprintissuemanager/css/print-issue-manager.css') }}">
<link rel="stylesheet" type="text/css" href="{{ asset('/js/select2-3.4.1/select2.css') }}" />
{% endblock %}
{% block admin_scripts %}
<script src="{{ asset('/js/select2-3.4.1/select2.js') }}"></script>
<script type="text/javascript" src="{{ asset('/bundles/newscoopnewscoop/js/DT_bootstrap.js') }}"></script>

{% endblock %}
{% block admin_content %}
{% if iPadLinkParams is empty %}
<h5><div class="alert alert-info">{{ 'plugin.printissuemanager.msg.ipaderror'|trans }}</div></h5>
{% endif %}
<div class="plugin-container">
    <form id="choose-issue" action="" method="POST">
        <select class="mobile_issues aaselect form-control" style="width: 300px;">
            {% if issues is empty %}
                <option>{{ 'plugin.printissuemanager.label.noissues'|trans }}</option>
            {% else %}
                {% for article in issues %}
                <option data-number="{{ article.number }}" data-language="{{ article.languageId }}" value="{{ article.number }}_{{ article.languageId }}" data-content-box-href="">{{ article.name }}</option>
                {% endfor %}
            {% endif %}
        </select>
    </form>
    {% if iPadLinkParams %} 
        <div class="ipad-section">
            <h5>
                {{ 'plugin.printissuemanager.label.createnew'|trans }}
                <button type="button" class="btn btn-primary"><a href="/admin/articles/?f_publication_id={{ iPadLinkParams.publicationId}}&f_issue_number={{ iPadLinkParams.issueId}}&f_section_number={{ iPadLinkParams.number}}&f_language_id={{ iPadLinkParams.languageId}}">To the category iPad</a></button>
            </h5>
        </div> 
    {% endif %}
    <div style="clear:both"></div>
    {% if issues is not empty %}
    <hr />
    <form action="{{ path('newscoop_printissuemanager_admin_loadarticles') }}" class="loadArticles">
        <input type="hidden" name="context_box_id" class="context_box_id" value="">
        <input type="hidden" name="article_number" class="article_number" value="">
        <input type="hidden" name="article_language" class="article_language" value="">
        <fieldset class="buttons">
            <h4 style="float:left" class="choosen-issue-name">{{ 'plugin.printissuemanager.msg.loading'|trans }}</h3>

            <div style="float:right;">
                <button style="float:left; margin: 0px 10px;" type="submit" name="load-aricles" id="load-articles-button" class="btn btn-default">{{ 'plugin.printissuemanager.label.loadarticles'|trans }}</button>
                <div class="issues-range" style="float:left">
                    <label style="display: inline-block; float: left; margin-right: 5px; margin-top: 3px;" for="issues_range">{{ 'plugin.printissuemanager.label.from'|trans }} </label>
                    <select name="issues_range[]" id="issues-range" style="width:250px; margin-left: 35px;" multiple="multiple" class="aaselect form-control">
                    {% set i = 0 %}
                    {% for issue in latestPrintIssues %}
                        {% if i <= 4 %}
                            <option {% if i == 0 %} selected="selected" {% endif %}value="{{ issue.number }}_{{ issue.language.id }}">{{ issue.name }}</option>
                        {% endif %}
                        {% set i = i + 1 %}
                    {% endfor %}
                    </select>
                </div>
                <div class="content-box" style="float:left; margin-left: 20px">
                    <button class="iframe btn btn-primary" type="button" >{{ 'plugin.printissuemanager.btn.addarticles'|trans }}</button>
                </div>
            </div>
        </fieldset>
    </form>
    <div style="clear:both"></div>

    <table cellpadding="0" cellspacing="0" border="0" class="datatable sortable table table-striped table-bordered issueArticles">
        <thead>
            <tr>
                <th style="width: 70px">{{ 'plugin.printissuemanager.btn.delete'|trans }}</th>
                <th style="width: auto;">{{ 'plugin.printissuemanager.label.articletitle'|trans }}</th>
                <th style="min-width: 90px;">{{ 'plugin.printissuemanager.label.webcode'|trans }}</th>
                <th style="width: 110px;">{{ 'plugin.printissuemanager.label.articletype'|trans }}</th>
                <th>{{ 'plugin.printissuemanager.label.section'|trans }}</th>
                <th>{{ 'plugin.printissuemanager.label.printsection'|trans }}</th>
                <th>{{ 'plugin.printissuemanager.label.printstory'|trans }}</th>
                <th style="width: 80px">{{ 'plugin.printissuemanager.label.prominent'|trans }}</th>
                <th style="width: 70px">{{ 'plugin.printissuemanager.btn.preview'|trans }}</th>
                <th style="width: 70px">{{ 'plugin.printissuemanager.btn.save'|trans }}</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    {% endif %}
</div>
<script type="text/javascript">
$(document).ready(function() {
    /*$('select.mobile_issues').select2();
    $('select#issues-range').select2();*/
});
</script>
<script type="text/javascript">
    var trans = {
        'frozen': '{{ 'plugin.printissuemanager.label.frozen'|trans }}',
        'published': '{{ 'plugin.printissuemanager.label.published'|trans }}',
        'submitted': '{{ 'plugin.printissuemanager.label.submitted'|trans }}',
        'delete': '{{ 'plugin.printissuemanager.btn.delete'|trans }}',
        'preview': '{{ 'plugin.printissuemanager.btn.preview'|trans }}',
        'save': '{{ 'plugin.printissuemanager.btn.save'|trans }}',
        'search': '{{ 'plugin.newsletter.label.search'|trans }}',
        'saved': '{{ 'plugin.printissuemanager.label.saved'|trans }}',
        'processing': '{{ 'plugin.printissuemanager.label.processing'|trans }}',
        'articlesloaded': '{{ 'plugin.printissuemanager.label.articlesloaded'|trans }}',
        'chooseprintsection': '{{ 'plugin.printissuemanager.label.chooseprintsection'|trans }}', 
        'addnew': '{{ 'plugin.printissuemanager.label.addnew'|trans }}',
        'backtolist': '{{ 'plugin.printissuemanager.label.backtolist'|trans }}',
        'chooseprintstory': '{{ 'plugin.printissuemanager.label.chooseprintstory'|trans }}',
        'addnewone': '{{ 'plugin.printissuemanager.label.addnewone'|trans }}',
        'articlesaved': '{{ 'plugin.printissuemanager.label.articlesaved'|trans }}',
        'articleremoved': '{{ 'plugin.printissuemanager.label.articleremoved'|trans }}',
        'isfrozen': '{{ 'plugin.printissuemanager.label.isfrozen'|trans }}',
    };
</script>
<script type="text/javascript" src="{{ asset('/bundles/newscoopprintissuemanager/js/print-issue-manager.js') }}"></script>
{% endblock %}